<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link rel="stylesheet" href="styleRegister.css" />
  </head>

  <body>
      <div class="left-container">
        <div class="logo">
          <img src="images/Logo.png" alt="logo" class="logo-img" />
        </div>
        <div class="background">
          <img src="images/background.png" alt="logo" class="background-image1" />
          <img src="images/imageRegister.png" alt="logo" class="background-image2" />
        </div>
      </div>
      <div class="right-container">
        <div class="right-container-menu">
          <select class="btn-language">
            <option value="vietnames" selected>Tiếng việt</option>
          </select>
          <button id="btnLogin" class="btn-login" onclick="window.location.href='/login.html'">Đăng nhập</button>
          <button id="btnRegister" class="btn-register" >Đăng ký</button>
        </div>
        <div class="right-container-auth-form">
          <form class="form-register" id="register" method="post">
            <div class="form-register-header">
              <label class="label-register">Đăng ký</label>
            </div>
            <div class="form-register-line">
              <label class="label-for-input" for="username">Tài khoản</label>
              <input type="text" name="username" required />
            </div>
            <div class="form-register-line">
              <label class="label-for-input" for="password">Nhập mật khẩu</label>
              <input type="password" name="password" required />
            </div>
            <div class="form-register-line">
              <label class="label-for-input" for="fullname">Nhập tên đầy đủ</label>
              <input type="text" name="fullname" required />
            </div>

            <input id="btnSubmitRegister" type="submit" value="Đăng ký" />
          </form>
        </div>

        <div class="right-container-function-noti">
            Đã có tài khoản đăng nhập tại <a class="redirect-text" href="/login.html" id="redirectLogin">đây!</a>
        </div>
      </div>
  </body>
</html>
<script>
  
  //btn dang ky
  const form = document.querySelector("#register");
  const btnRegister = document.querySelector("#btnSubmitRegister");
  btnRegister.addEventListener("click", function (e) {
    e.preventDefault();

    createUser(
      form.querySelector('[name="fullname"]').value,
      form.querySelector('[name="username"]').value,
      form.querySelector('[name="password"]').value
    );
  });
  function createUser(FullName, Username, Password) {
    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");
    var raw = JSON.stringify({
      FullName: FullName,
      Username: Username,
      Password: Password,
    });

    var requestOptions = {
      method: "POST",
      headers: myHeaders,
      body: raw,
      redirect: "follow",
    };

    fetch("http://10.2.44.52:8888/api/auth/register", requestOptions)
      .then((response) => response.text())
      .then((result) => {
        console.log(result);
      })
      .catch((error) => console.log("error", error));
  }
</script>

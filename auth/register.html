<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link rel="stylesheet" href="styleRegister.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  </head>

  <body>
      <div class="left-container">
        <div class="logo">
          <img src="images/Logo.png" alt="logo" class="logo-img" />
        </div>
        <div class="background">
          <img src="images/background.png" alt="logo" class="background-image1" />
          <img src="images/imageRegister.png" alt="logo" class="background-image2" />
        </div>
      </div>
      <div class="right-container">
        <div class="right-container-menu">
          <select class="btn-language">
            <option value="vietnames" selected>Tiếng việt</option>
          </select>
          <button id="btnLogin" class="btn-login" onclick="window.location.href='/login.html'">Đăng nhập</button>
          <button id="btnRegister" class="btn-register" >
            <hr class="underline">
            Đăng ký
          </button>
        </div>
        <div class="right-container-auth-form">
          <form class="form-register" id="register" method="post">
            <div class="form-register-header">
              <label class="label-register">Đăng ký</label>
            </div>
            <div class="form-register-line">
              <label class="label-for-input" for="username">Tài khoản</label>
              <input type="text" name="username" required />
            </div>
            <div class="form-register-line">
              <label class="label-for-input" for="password">Nhập mật khẩu</label>
              <input type="password" name="password" required />
            </div>
            <div class="form-register-line">
              <label class="label-for-input" for="fullname">Nhập tên đầy đủ</label>
              <input type="text" name="fullname" required />
            </div>

            <input id="btnSubmitRegister" type="submit" value="Đăng ký" />
          </form>
        </div>

        <div class="right-container-function-noti">
            Đã có tài khoản đăng nhập tại <a class="redirect-text" href="/login.html" id="redirectLogin">đây!</a>
        </div>
      </div>
  </body>
</html>
<script>
  
  //btn dang ky
  $(document).ready(function(){
    const form=$("#register");
    const btnSubmitRegister=$("#btnSubmitRegister");

    btnSubmitRegister.on("click",function(e)
    {
      e.preventDefault();
      register(
        form.find('[name="fullname"]').val(),
        form.find('[name="username"]').val(),
        form.find('[name="password"]').val()
      );
    });
  });
  function register(FullName,Username,Password)
  {
    var raw = JSON.stringify({
      FullName: FullName,
      Username: Username,
      Password: Password,
    });
    $.ajax({
      url: "http://10.2.44.52:8888/api/auth/register",
      method: "POST",
      contentType: "application/json",
      data:raw,
      success: function(result)
      {
        console.log(result);
        alert("Đăng ký thành công");
        window.location.href="/login.html";
      },
      error: function(error)
      {
        console.log("error: ",error);
        alert("Đã xảy ra lỗi trong quá trình đăng ký");
      }
    })
  }
</script>
